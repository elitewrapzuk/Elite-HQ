<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cut Optimiser (embed)</title>
  <style>
    body{font-family:Inter,system-ui,Arial;margin:8px}
    .card{background:var(--surface);border:1px solid var(--line);padding:12px;border-radius:10px}
    canvas{width:100%;height:auto;border:1px solid var(--line)}
    button{cursor:pointer}
  </style>
</head>
<body>
  <div class="card">
    <label>Roll width (mm):<input id="rollW" type="number" value="1220"></label>
    <label>Pieces (w x h, one per line):<textarea id="pieces" rows="6">600x300 A1
600x300 A2
400x400 A3
200x1200 A4</textarea></label>
    <div style="margin-top:8px"><button id="run">Optimize</button></div>
    <div style="margin-top:8px" id="result"></div>
    <canvas id="c" width="900" height="2200"></canvas>
  </div>
  <script>
    // Use the existing optimiser logic from the provided file but minimal for embed
    document.getElementById('run').addEventListener('click', ()=>{
      const w = parseInt(document.getElementById('rollW').value)||1220;
      const lines = (document.getElementById('pieces').value||'').split('\n').map(l=>l.trim()).filter(Boolean);
      const pieces = lines.map(l=>{ const m=l.match(/(\d+)x(\d+)\s*(.*)?/i); return m?{w:parseInt(m[1]),h:parseInt(m[2]),code:m[3]||''}:null }).filter(Boolean);
      // naive greedy
      const bins=[]; pieces.forEach(p=>{ let placed=false; for(const b of bins){ if(b.rem>=p.w){ b.parts.push(p); b.rem-=p.w; placed=true; break; } } if(!placed) bins.push({rem:w-p.w, parts:[p]}); });
      document.getElementById('result').innerHTML = `Sheets used: ${bins.length}` + bins.map((b,i)=>`<div>Sheet ${i+1}: ${b.parts.map(x=>x.w+'x'+x.h).join(', ')} (waste ${b.rem}mm)</div>`).join('');
      // draw simple representation
      const canvas = document.getElementById('c'); const ctx=canvas.getContext('2d'); ctx.clearRect(0,0,canvas.width,canvas.height); const scale=canvas.width/w; ctx.strokeStyle='#000'; ctx.strokeRect(0,0,canvas.width,500);
      let y=10; bins.forEach(b=>{ let x=0; b.parts.forEach(p=>{ ctx.fillStyle='#e6f4ff'; ctx.fillRect(x,y,p.w*scale,80); ctx.strokeRect(x,y,p.w*scale,80); ctx.fillStyle='#000'; ctx.fillText(p.w+'x'+p.h, x+6, y+20); x+=p.w*scale; }); y+=100; });
    });
  </script>
</body>
</html>
