<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Quoter (embed)</title>
  <style>
    body{font-family:Inter,system-ui,Arial;margin:8px}
    .card{background:var(--surface);border:1px solid var(--line);padding:12px;border-radius:10px}
    .btn{cursor:pointer}
  </style>
</head>
<body>
  <div class="card">
    <h3>Quote Maker</h3>
    <label>Client name:<input id="q_name" type="text"></label>
    <label>Items (qty x description - price):<textarea id="q_items" rows="6"></textarea></label>
    <div style="margin-top:8px"><button id="q_run">Preview Quote</button></div>
    <div id="q_out" style="margin-top:8px"></div>
  </div>
  <script>
    document.getElementById('q_run').addEventListener('click', ()=>{
      const name=document.getElementById('q_name').value||'Customer';
      const items=(document.getElementById('q_items').value||'').split('\n').map(l=>l.trim()).filter(Boolean);
      let total=0; const rows=items.map(l=>{ const m=l.match(/(\d+)x\s*(.*)\-\s*([\d.]+)/); if(m){ const qty=parseInt(m[1]), desc=m[2].trim(), price=parseFloat(m[3]); total+=qty*price; return `<div>${qty}x ${desc} â€” ${currency(price*qty)}</div>` } return `<div>${l}</div>` });
      document.getElementById('q_out').innerHTML = `<strong>Quote for ${name}</strong>` + rows.join('') + `<div style="margin-top:8px;font-weight:800">Total: ${currency(total)}</div>`;
    });
  </script>
</body>
</html>
